<nav aria-label="navigation" {{ field.name ? 'data-id="' ~ field.name ~ '"' : ''}}>
  <ul class="pager pager-lms">
    {# display the previous button #}
    {% if activity.tag == module.firstActivityTag %}
      {# if first activity of a module, the previous link is to the current module entry #}
      <li class="previous">
        <a href="{{ url({tag:module.tag,params:{course:course.tag}}) }}"
        {%- if field.moduleModal %} class="bazar-entry modalbox"{% endif -%}
        >
          <span aria-hidden="true">&larr;</span>&nbsp;
          {{- _t('LMS_PREVIOUS') -}}
        </a>
      </li>
    {% elseif previousActivity %}
      {# otherwise, the previous link is to the previous activity #}
      <li class="previous">
        <a href="{{ url({tag:previousActivity.tag,params:{course:course.tag,module:module.tag}}) }}">
          <span aria-hidden="true">&larr;</span>&nbsp;
          {{- _t('LMS_PREVIOUS') -}}
        </a>
      </li>
    {% endif %}
    {# display the next button #}
    {% if activity.tag == module.lastActivityTag %}
      {% if nextModule %}
        {# if the current page is the last activity of the module and the module is not the last one,
        the next link is to the next module entry
        (no next button is showed for the last activity of the last module) #}
        <li class="next">
          <a href="{{ url({tag:nextModule.tag,params:{course:course.tag}}) }}"
          {%- if field.moduleModal %} class="bazar-entry modalbox"{% endif -%}
          >
            {{- _t('LMS_NEXT') -}}
            &nbsp;<span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      {% endif %}
    {% else %}
      {% if nextActivity %}
        {# otherwise, the current activity is not the last of the module and the next link is set to the next activity #}
        <li class="next">
          {% if not conditionsEnabled or (conditionsEnabled and conditionsPassed) %}
            <a href="{{ url({tag:nextActivity.tag,params:{course:course.tag,module:module.tag}}) }}">
          {% else %}
            {{ include_javascript('tools/lms/presentation/javascript/activity-navigation-view.js') }}
            <a class="disabled wait-cursor"
              onmouseover="checkActivityNavigationConditions(this,'{{ course.tag }}','{{ module.tag }}','{{ activity.tag }}')">
          {% endif %}
              {{- _t('LMS_NEXT') -}}
              &nbsp;<span aria-hidden="true">&rarr;</span>
            </a>
        </li>
      {% endif %}
    {% endif %}
  </ul>
</nav>
{% if nextActivity and conditionsEnabled and not conditionsPassed %}
  <script>
    var checkActivityNavigationConditionsURL = '{{ url({tag:'api',handler:'lms/check-conditions/'}) }}';
  </script>
{% endif %}